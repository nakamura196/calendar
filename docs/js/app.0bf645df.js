(function(t){function e(e){for(var a,o,c=e[0],i=e[1],s=e[2],h=0,d=[];h<c.length;h++)o=c[h],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);u&&u(e);while(d.length)d.shift()();return l.push.apply(l,s||[]),r()}function r(){for(var t,e=0;e<l.length;e++){for(var r=l[e],a=!0,c=1;c<r.length;c++){var i=r[c];0!==n[i]&&(a=!1)}a&&(l.splice(e--,1),t=o(o.s=r[0]))}return t}var a={},n={app:0},l=[];function o(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=a,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(r,a,function(e){return t[e]}.bind(null,a));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var u=i;l.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-content",[r("router-view")],1)],1)},l=[],o={props:{source:String},data:function(){return{drawer:null}}},c=o,i=r("2877"),s=r("6544"),u=r.n(s),h=r("7496"),d=r("a75b"),f=Object(i["a"])(c,n,l,!1,null,null,null),v=f.exports;u()(f,{VApp:h["a"],VContent:d["a"]});var p=r("8c4f"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Header",{attrs:{header:t.header,url:t.return_url,label:t.return_label,u:t.u,description:t.description}}),r("v-container",{staticClass:"mt-2 mb-5"},[r("SearchForm",{attrs:{q:t.q,collections:t.collections,collections_query:t.index.collections?Object.keys(t.index.collections):[],u:t.u,search_place_holder:t.search_place_holder}}),r("v-card",{staticClass:"mt-5"},[r("v-card-text",[r("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[r("tbody",t._l(t.items,(function(e,a){return r("tr",{key:a},[r("th",[t._v(t._s(e.year)+" ("+t._s(e.wareki)+")")]),t._l(12,(function(a){return r("td",{key:a,staticClass:"text-xs-right"},[e.month[a-1]>0?r("router-link",{attrs:{to:{path:"item",query:{param:JSON.stringify({q:t.q,collections:t.collections}),u:t.u,date:e.year+"-"+a}}}},[t._v(t._s(a)+"月 ("+t._s(e.month[a-1])+")")]):r("span",[t._v(t._s(a)+"月")])],1)}))],2)})),0)]},proxy:!0}])})],1)],1)],1),r("Footer",{attrs:{footer:t.footer}})],1)},_=[],b=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("4de4"),r("c975"),r("a9e3"),r("d3b7"),r("ac1f"),r("6062"),r("3ca3"),r("841c"),r("1276"),r("ddb0"),r("284c")),y=r("bc3a"),x=r.n(y),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-app-bar",{attrs:{color:"primary",dark:""}},[r("v-toolbar-title",[t._v(t._s(t.header))]),r("v-spacer"),r("v-toolbar-items",{directives:[{name:"show",rawName:"v-show",value:t.url,expression:"url"}]},[r("v-btn",{attrs:{text:"",to:{name:"index",query:{u:t.u}}}},[t._v("HOME")]),r("v-btn",{attrs:{text:"",target:"_blank",href:t.url}},[t._v(" "+t._s(t.label)+" "),r("i",{staticClass:"ml-1 fas fa-external-link-alt"})])],1)],1),r("v-container",{staticClass:"mt-5"},[t._v(t._s(t.description))])],1)},w=[],k={props:["header","url","label","u","description"]},q=k,O=r("40dc"),V=r("8336"),C=r("a523"),S=r("2fa4"),E=r("2a7f"),j=Object(i["a"])(q,g,w,!1,null,null,null),T=j.exports;u()(j,{VAppBar:O["a"],VBtn:V["a"],VContainer:C["a"],VSpacer:S["a"],VToolbarItems:E["a"],VToolbarTitle:E["b"]});var $=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-footer",{staticClass:"mt-5"},[r("v-container",{staticClass:"py-5 text-center"},[t._v(t._s(t.footer))])],1)},F=[],P={props:["footer"]},M=P,N=r("553a"),J=Object(i["a"])(M,$,F,!1,null,null,null),A=J.exports;u()(J,{VContainer:C["a"],VFooter:N["a"]});var D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-text",[r("v-form",{ref:"form"},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-text-field",{staticClass:"mx-2",attrs:{label:t.search_place_holder,name:"q"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.q_,callback:function(e){t.q_=e},expression:"q_"}})],1),r("v-flex",{attrs:{xs12:"",sm6:""}},[r("v-select",{staticClass:"mx-2",attrs:{items:t.collections_query,label:"コレクション / Collection",multiple:""},model:{value:t.collections_,callback:function(e){t.collections_=e},expression:"collections_"}})],1)],1),r("v-btn",{attrs:{color:"primary"},on:{click:t.search}},[t._v("Search")])],1)],1)],1)},L=[],B={props:["collections_query","q","u","collections","search_place_holder"],data:function(){return{collections_:this.collections,q_:this.q}},methods:{search:function(){this.$parent.collections=this.collections_,this.$parent.q=this.q_;var t={collections:this.collections_};this.q_&&(t.q=this.q_),this.$router.push({name:"index",query:{param:JSON.stringify(t),u:this.u}})}}},H=B,I=r("b0af"),R=r("99d9"),W=r("0e8f"),z=r("4bd4"),U=r("a722"),Z=r("b974"),G=r("8654"),K=Object(i["a"])(H,D,L,!1,null,null,null),Q=K.exports;function X(t){var e="";return t>1988?e="平成"+(t-1988):t>1925?e="昭和"+(t-1925):t>1911?e="大正"+(t-1911):t>1867&&(e="明治"+(t-1867)),e}u()(K,{VBtn:V["a"],VCard:I["a"],VCardText:R["a"],VFlex:W["a"],VForm:z["a"],VLayout:U["a"],VSelect:Z["a"],VTextField:G["a"]});var Y={components:{Header:T,Footer:A,SearchForm:Q},data:function(){return{return_url:null,return_label:null,header:null,footer:null,items:[],data_all:[],q:"",u:null,description:"",search_place_holder:"",index:{},collections:[]}},watch:{$route:function(){this.search()}},created:function(){var t=this,e=Object.assign({},this.$route.query);if(e.u||(location.href="https://github.com/nakamura196/calendar"),this.u=e.u,e.param){var r=JSON.parse(e.param);this.q=r.q?r.q:this.q,this.collections=r.collections?r.collections:this.collections}x.a.get(this.u).then((function(e){var r=e.data;t.header=r.header,t.footer=r.footer,t.return_url=r.return_url,t.return_label=r.return_label,t.description=r.description,t.search_place_holder=r.search_place_holder;var a=r.data;t.data_all=a;for(var n={fulltext:{}},l=0;l<a.length;l++){var o=a[l],c="";for(var i in o){n[i]||(n[i]={});var s=o[i];s instanceof Array||(s=[s]);for(var u=0;u<s.length;u++){var h=s[u];c+=h+" ",n[i][h]||(n[i][h]=[]),n[i][h].push(l)}}n["fulltext"][c]=[l]}t.index=n,t.search()}))},methods:{search:function(){var t=this.filter(),e=[];this.items=e;for(var r=2e3,a=0,n={},l=0;l<t.length;l++){var o=t[l],c=o.date,i=1,s=c.split("-"),u=Number(s[0]);u<r&&(r=u),u>a&&(a=u);var h=Number(s[1]);n[u]||(n[u]={});var d=n[u];d[h]||(d[h]=0),d[h]+=i}for(var f=r;f<=a;f++){for(var v={year:f,wareki:X(f),month:[]},p=n[f],m=1;m<=12;m++){var _=null!=p&&p[m]?p[m]:0;v.month.push(_)}e.push(v)}},filter:function(){var t=this.index,e=[],r=[],a=this.collections;if(0==a.length)for(var n in t.collections)e=e.concat(t.collections[n]);else for(var l=0;l<a.length;l++){var o=a[l],c=t.collections[o];e=e.concat(c)}var i=this.q;if(i)for(var s in t.fulltext)-1!=s.indexOf(i)&&(r=r.concat(t.fulltext[s]));else for(var u in t.fulltext)r=r.concat(t.fulltext[u]);var h=new Set(e),d=new Set(r),f=new Set(Object(b["a"])(h).filter((function(t){return d.has(t)}))),v=[],p=!0,m=!1,_=void 0;try{for(var y,x=f[Symbol.iterator]();!(p=(y=x.next()).done);p=!0){var g=y.value;v.push(this.data_all[g])}}catch(w){m=!0,_=w}finally{try{p||null==x.return||x.return()}finally{if(m)throw _}}return v}}},tt=Y,et=r("1f4f"),rt=Object(i["a"])(tt,m,_,!1,null,null,null),at=rt.exports;u()(rt,{VCard:I["a"],VCardText:R["a"],VContainer:C["a"],VSimpleTable:et["a"]});var nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Header",{attrs:{header:t.header,url:t.return_url,label:t.return_label,u:t.u,description:t.description}}),r("v-container",{staticClass:"mt-2 mb-5"},[r("SearchForm",{attrs:{q:t.q,collections:t.collections,collections_query:t.index.collections?Object.keys(t.index.collections):[],u:t.u,search_place_holder:t.search_place_holder}}),r("v-row",{staticClass:"fill-height mt-5"},[r("v-col",[r("v-sheet",{attrs:{height:"64"}},[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-btn",{attrs:{fab:"",text:"",small:""},on:{click:t.prev}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-left")])],1),r("v-btn",{attrs:{fab:"",text:"",small:""},on:{click:t.next}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-chevron-right")])],1),r("v-toolbar-title",{staticClass:"ml-5"},[t._v(t._s(t.title))]),r("v-spacer"),r("v-menu",{attrs:{bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{outlined:""}},a),[r("span",[t._v(t._s(t.typeToLabel[t.type]))]),r("v-icon",{attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}])},[r("v-list",[r("v-list-item",{on:{click:function(e){t.type="day"}}},[r("v-list-item-title",[t._v("Day")])],1),r("v-list-item",{on:{click:function(e){t.type="week"}}},[r("v-list-item-title",[t._v("Week")])],1),r("v-list-item",{on:{click:function(e){t.type="month"}}},[r("v-list-item-title",[t._v("Month")])],1)],1)],1)],1)],1),r("v-sheet",{attrs:{height:"600"}},[r("v-calendar",{ref:"calendar",attrs:{color:"primary",events:t.events,"event-margin-bottom":3,type:t.type},on:{"click:event":t.showEvent,"click:more":t.viewDay,"click:date":t.viewDay,change:t.updateRange},model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}}),r("v-menu",{attrs:{"close-on-content-click":!1,activator:t.selectedElement,"offset-x":""},model:{value:t.selectedOpen,callback:function(e){t.selectedOpen=e},expression:"selectedOpen"}},[r("v-card",[r("v-card-text",[r("v-row",[r("v-col",[r("a",{attrs:{target:"_blank",href:t.selectedEvent.url}},[r("v-img",{attrs:{src:t.selectedEvent.thumbnail,"lazy-src":t.selectedEvent.thumbnail}})],1)]),r("v-col",[r("p",[r("a",{attrs:{target:"_blank",href:t.selectedEvent.url}},[t._v(" "+t._s(t.selectedEvent.name)+" "),r("i",{staticClass:"fas fa-external-link-alt"})])]),t._v(" "+t._s(t.selectedEvent.description)+" ")])],1)],1)],1)],1)],1)],1)],1)],1),r("Footer",{attrs:{footer:t.footer}})],1)},lt=[],ot={components:{Header:T,Footer:A,SearchForm:Q},data:function(){return{return_url:null,return_label:null,header:null,footer:null,items:[],q:null,u:null,description:"",search_place_holder:"",index:{},collections:[],type:"month",events:[],typeToLabel:{month:"Month",week:"Week",day:"Day"},focus:"2000-01-01",start:null,end:null,selectedEvent:{},selectedElement:null,selectedOpen:!1,yearAndMonth:""}},computed:{title:function(){var t=this.start,e=this.end;if(!t||!e)return"";var r=this.monthFormatter(t),a=this.monthFormatter(e),n=r===a?"":a,l=t.year,o=e.year,c=l===o?"":o,i=t.day+this.nth(t.day),s=e.day+this.nth(e.day);switch(this.type){case"month":return"".concat(r," ").concat(l);case"week":case"4day":return"".concat(r," ").concat(i," ").concat(l," - ").concat(n," ").concat(s," ").concat(c);case"day":return"".concat(r," ").concat(i," ").concat(l)}return""},monthFormatter:function(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})}},mounted:function(){this.$refs.calendar.checkChange()},created:function(){var t=this,e=Object.assign({},this.$route.query);this.u=e.u?e.u:this.u,this.focus=e.date?e.date+"-01":"2020-01-01";var r=this.focus.split("-");if(this.yearAndMonth=r[0]+"-"+r[1],e.param){var a=JSON.parse(e.param);this.q=a.q?a.q:this.q,this.collections=a.collections?a.collections:this.collections}x.a.get(this.u).then((function(e){var r=e.data;t.header=r.header,t.footer=r.footer,t.return_url=r.return_url,t.return_label=r.return_label,t.description=r.description,t.search_place_holder=r.search_place_holder;var a=r.data;t.data_all=a;for(var n={fulltext:{}},l=0;l<a.length;l++){var o=a[l],c="";for(var i in o){n[i]||(n[i]={});var s=o[i];s instanceof Array||(s=[s]);for(var u=0;u<s.length;u++){var h=s[u];c+=h+" ",n[i][h]||(n[i][h]=[]),n[i][h].push(l)}}n["fulltext"][c]=[l]}t.index=n,t.search()}))},methods:{search:function(){for(var t=this.filter(),e=[],r=0;r<t.length;r++){var a=t[r];e.push({name:a.label,start:a.date,end:a.date,url:a.url,description:a.description,thumbnail:a.thumbnail})}this.events=e},filter:function(){var t=this.index,e=[],r=[],a=this.collections;if(0==a.length)for(var n in t.collections)e=e.concat(t.collections[n]);else for(var l=0;l<a.length;l++){var o=a[l],c=t.collections[o];e=e.concat(c)}var i=this.q;if(i)for(var s in t.fulltext)-1!=s.indexOf(i)&&(r=r.concat(t.fulltext[s]));else for(var u in t.fulltext)r=r.concat(t.fulltext[u]);var h=new Set(e),d=new Set(r),f=new Set(Object(b["a"])(h).filter((function(t){return d.has(t)}))),v=[],p=!0,m=!1,_=void 0;try{for(var y,x=f[Symbol.iterator]();!(p=(y=x.next()).done);p=!0){var g=y.value;v.push(this.data_all[g])}}catch(w){m=!0,_=w}finally{try{p||null==x.return||x.return()}finally{if(m)throw _}}return v},viewDay:function(t){var e=t.date;this.focus=e,this.type="day"},prev:function(){this.$refs.calendar.prev(),this.updatePath()},next:function(){this.$refs.calendar.next(),this.updatePath()},showEvent:function(t){var e=this,r=t.nativeEvent,a=t.event,n=function(){e.selectedEvent=a,e.selectedElement=r.target,setTimeout((function(){return e.selectedOpen=!0}),10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(n,10)):n(),r.stopPropagation()},updateRange:function(t){var e=t.start,r=t.end;this.start=e,this.end=r},nth:function(t){return t>3&&t<21?"th":["th","st","nd","rd","th","th","th","th","th","th"][t%10]},handleDateClick:function(t){window.open(t.event.id,"_blank")},updatePath:function(){var t=this.focus.split("-"),e=t[0]+"-"+t[1];this.$router.push({name:"item",query:{param:JSON.stringify({q:this.q,collections:this.collections}),date:e,u:this.u}})}}},ct=ot,it=r("a4f6"),st=r("62ad"),ut=r("132d"),ht=r("adda"),dt=r("8860"),ft=r("da13"),vt=r("5d23"),pt=r("e449"),mt=r("0fd9"),_t=r("8dd9"),bt=r("71d9"),yt=Object(i["a"])(ct,nt,lt,!1,null,null,null),xt=yt.exports;u()(yt,{VBtn:V["a"],VCalendar:it["a"],VCard:I["a"],VCardText:R["a"],VCol:st["a"],VContainer:C["a"],VIcon:ut["a"],VImg:ht["a"],VList:dt["a"],VListItem:ft["a"],VListItemTitle:vt["b"],VMenu:pt["a"],VRow:mt["a"],VSheet:_t["a"],VSpacer:S["a"],VToolbar:bt["a"],VToolbarTitle:E["b"]}),a["a"].use(p["a"]);var gt=[{path:"/",name:"index",component:at},{path:"/item",name:"item",component:xt}],wt=new p["a"]({base:"",routes:gt,scrollBehavior:function(){return{x:0,y:0}}}),kt=wt,qt=r("f309");a["a"].use(qt["a"]);var Ot=new qt["a"]({});a["a"].config.productionTip=!1,new a["a"]({router:kt,vuetify:Ot,render:function(t){return t(v)}}).$mount("#app")}});
//# sourceMappingURL=app.0bf645df.js.map